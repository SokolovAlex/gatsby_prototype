<div class="product-item" ng-class="{'featured-item': $ctrl.highlighted == 'true'}">
	<div class="promoline" ng-if="$ctrl.highlighted == 'true'" ng-bind-html="$ctrl.getPromoline()" data-test="buyblock-promoline--{{$ctrl.product.shortName}}"></div>
	<header class="divider">
		<figure><a ng-href="{{::$ctrl.product.prodPageLink}}">
			<img ng-class="{'cursorDefault': $ctrl.hideProductLinks}" ng-src="{{::$ctrl.productBox || $ctrl.product.fullSizeImage}}" ng-attr-alt="{{::$ctrl.product.title}}"
				 title="{{::$ctrl.product.title}}" data-test="buyblock-box--{{$ctrl.product.shortName}}" />
		</a></figure>
		<div class="tagline"><p ng-if="$ctrl.product.summary != null" data-test="buyblock-tagline--{{$ctrl.product.shortName}}">{{::$ctrl.product.summary}}</p></div>
		<h2 class="product-title" data-product-name="{{$ctrl.productName}}" data-test="buyblock-title--{{$ctrl.product.shortName}}">
			<a ng-class="{'cursorDefault': $ctrl.hideProductLinks}" ng-href="{{$ctrl.product.prodPageLink}}">
				<span class="surtitle" ng-bind-html="$ctrl.product.prodKasperskyTitle">{{::$ctrl.product.prodKasperskyTitle}}</span>
				<span>{{::$ctrl.product.prodMainTitle}}</span>
				<span class="subtitle" ng-if="$ctrl.product.prodAddTitle">{{::$ctrl.product.prodAddTitle}}</span>
			</a>
		</h2>
	</header>
	<div class="desc divider">
		<p ng-bind-html="$ctrl.description || $ctrl.product.shortDesc | html" data-test="buyblock-desc--{{$ctrl.product.shortName}}"></p>
		<div class="meta reviews" data-test="buyblock-reviews--{{$ctrl.product.shortName}}">
			<bazaarvoice product-id="{{::$ctrl.product.bvId}}" ng-if="$ctrl.product.bvId"></bazaarvoice>
		</div>
	</div>
	<div class="buy-block" ng-if="$ctrl.product.bbSettings.purchaseType !== 'Free' && $ctrl.productPricesExist">
		<div class="price">
			<p>{{$ctrl.currentValue.price | customCurrency}}{{$ctrl.disclaimerObj.asterisk}}</p>
			<p class="price-old">
				<span ng-if="$ctrl.currentValue.price_striked">
					<span class="price-cut" data-test="buyblock-price-cut--{{$ctrl.product.shortName}}">{{$ctrl.currentValue.price_striked | customCurrency}}{{$ctrl.disclaimerObj.asterisk}}</span>
					<span class="price-saving" ng-if="$ctrl.getSavings('rate')" ng-bind-html="$ctrl.getSavings('rate')" data-test="buyblock-price-saving--{{$ctrl.product.shortName}}"></span>
				</span>
			</p>
		</div>
		<buyblock-user-account account-info-override="{{$ctrl.product.accountInfo}}"
							   description-popup="{{$ctrl.product.accountDesc}}"
							   label="{{$ctrl.product.userAccountText}}"
							   count="$ctrl.currentValue['user-accounts']"></buyblock-user-account>
		<form>
			<div class="form-element">
				<select class="device-number" ng-if="!$ctrl.hidePack" ng-model="$ctrl.packValue" ng-options="pack for pack in $ctrl.packArr" ng-change="$ctrl.setCurrentValue()" data-test="buyblock-packs--{{$ctrl.product.shortName}}"></select>
			</div>
			<div class="form-element">
				<select class="years" ng-model="$ctrl.termValue" ng-options="pack for pack in $ctrl.termArr" ng-change="$ctrl.setCurrentValue()" data-test="buyblock-terms--{{$ctrl.product.shortName}}"></select>
			</div>
			<div class="form-element checkbox text-center no-margin" ng-if="$ctrl.hideArCheckbox !== 'true'" ng-class="{selected: $ctrl.autorenew}">
				<div ng-if="$ctrl.renewalAvailable && $ctrl.showAR == 'true' && $ctrl.hideArCheckbox !== 'true'">
					<label class="yes" data-test="buyblock-renewalchkbox--{{$ctrl.product.shortName}}">
						<input type="checkbox" checked="checked" ng-model="$ctrl.autorenew" ng-change="$ctrl.setCurrentValue()" ng-click="$ctrl.registerOnce(true)">
						{{$ctrl.buyblockData.autoRenewal}}
					</label>
					<span ng-click="$ctrl.showARPopup()" class="font-icons icon-help tooltip" data-test="buyblock-renewal--{{$ctrl.product.shortName}}"></span>
				</div>
			</div>
			<div class="form-element buttons">
				<a ng-href="{{$ctrl.buyLink}}" data-omniture-sale-button-type="Buy" data-omniture-product-name="{{$ctrl.productName}}" data-test="buyblock-buy--{{$ctrl.product.shortName}}">
                    <div class="button" ng-class="$ctrl.highlighted ? 'red' : 'green'">{{::$ctrl.buyButtonText || $ctrl.buyblockData.buyText}}</div>
                </a>
			</div>
		</form>
		<a ng-if="$ctrl.hasTrialButton()" ng-href="{{$ctrl.product.freeTrialLink}}" class="button transparent full-width" data-test="buyblock-free-trial--{{$ctrl.product.shortName}}">{{$ctrl.product.freeTrialText}}</a>
		<p ng-if="$ctrl.disclaimerObj.disclaimer" ng-bind-html="$ctrl.disclaimerObj.disclaimer|html"></p>
	</div><!-- /buy-block -->
	<div class="buy-block" ng-if="$ctrl.product.bbSettings.purchaseType !== 'Free' && !$ctrl.productPricesExist">
        <product-unavailable-block ng-switch="$ctrl.buyblockData.buyblock_not_available_msg.length > 0">
            <product-unavailable-msg ng-switch-when="true" ng-bind-html="$ctrl.buyblockData.buyblock_not_available_msg"></product-unavailable-msg>
            <p ng-switch-default>This product is currently unavailable in your region. Please <a href="/about/contact">contact us</a> for further details.</p>
        </product-unavailable-block>
  </div>
	<div class="buy-block buy-block--free" ng-if="$ctrl.product.bbSettings.purchaseType === 'Free'">
		<div class="price">
			<p>{{$ctrl.buyblockData.freeProduct}}</p>
			<p class="price-old">
				<!--placeholder-->
				<p>
		</div>

		<buyblock-user-account account-info-override="{{$ctrl.product.accountInfo}}"
		  description-popup="{{$ctrl.product.accountDesc}}"
		  label="{{$ctrl.product.userAccountText}}"
		  count="$ctrl.currentValue['user-accounts']"></buyblock-user-account>
		<form>
			<div class="form-element">
				<!--placeholder-->
			</div>
			<div class="form-element">
				<!--placeholder-->
			</div>
			<div class="form-element">
				<!--placeholder-->
			</div>

			<div class="form-element buttons">
				<a ng-if="$ctrl.hasTrialButton()"
				  ng-href="{{$ctrl.product.freeTrialLink}}">
					<div class="button red">{{$ctrl.product.freeTrialText}}</div>
				</a>
				<a style="display:block;text-align:center;"
				  ng-if="$ctrl.product.bbSettings.downloadFromGplayLink"
				  ng-href="{{::$ctrl.product.bbSettings.downloadFromGplayLink}}"
				  class="green full-width"
				  target="_blank"
				  data-omniture-sale-button-type="Product Update Gplay"
				  data-test="buyblock-pc-gplay--{{$ctrl.product.shortName}}">
								<img ng-src="{{'content/en-global/images/download-badge-google-play.png' | addLocalRoot}}"
								alt="{{::$ctrl.product.bbSettings.downloadFromGplayText}}" title="{{::$ctrl.product.bbSettings.downloadFromGplayText}}">
							</a>
			</div>
		</form>
	</div><!-- /buy-block -->
</div><!-- /product-item -->
